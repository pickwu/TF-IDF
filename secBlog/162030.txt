*本文原创作者：冰海，本文属FreeBuf原创奖励计划，未经许可禁止转载
0×00 最近有只蛙
2018年元旦过后，一款旅行青蛙（原名旅かえる）的放置类手游迅速受到广大有爱青年的热捧，朋友圈、微博、知乎等掀起了一场母爱泛滥的晒蛙风。
我也受这阵妖风的影响，加入了看蛙的队列，看蛙的过程中动了恻隐之心，蛙这三叶草不够啊，饿着了怎么办，吃不好睡不好怎么办，技术爸爸要履行职责，给它创造优越的成长环境。咋了爸爸，哈哈哈哈哈！！！
这只蛙广交好友，想让其它同伴也享受豪蛙待遇，特此委托技术爸爸做一分享，所以不继续卖关子了，直奔主题。
本文主要讲述越狱iPhone机、普通iPhone机、Android ROOT机的修改方法，普通Android机网上有现成可用的修改软件，本文不做详细讲述。
0×01 越狱iPhone机
设备软件清单：越狱机一台，安装iFile文件管理APP
一切还得从越狱机说起，装了这只蛙之后，简单玩了一下，看不懂日文，大概操作还是能明白一点的，最起码按钮上左边是确认右边是取消，这个是晓得的，哈哈。收获的三叶草可以用来买食物装备给娃，买了三叶草就减少了，没看攻略，刚上来就尝试了修改系统时间让三叶草重新长满的方法，知道了三叶草是三小时长满一次。
继而设Burp代理，看这只蛙是否是CS（客户端和服务端）通讯模式，没有获取到网络数据包，猜测是单机版手游。用的手机是越狱了的，所以一上来的想法也是直接去查看游戏的系统文件，看是否有可利用的地方。
启用iFile网页服务器，在PC上操作，方便查看和传输文件：
启动后在PC浏览器上输入iFile网页服务器提示链接地址，下图为：http://192.168.111.199:10000
访问成功后进入依次进入到/var/mobile/Containers/Data/Application目录，如下（注意Tips）：
根据最新的修改时间可以找到旅行青蛙的文件目录（这个地方有好的定位app目录的方法，欢迎赐教，谢谢），本机为733DF618-5063-4788-A637-B9273463EC51目录：
继而在Document目录下看到了旅行青蛙的游戏存档文件，GameData.sav文件：
百科关于sav文件的解说，不能通过第三方软件进行修改，当时是吓着我了：
继而用百度在网上找各种sav编辑修改工具，无果，最后请出谷哥，开挂式的就出来了：
找到一在线版sav文件编辑工具，http://www.saveeditonline.com/
修改完后下载修改后的sav存档文件，然后删除或者修改原GameData.sav存档文件，上传修改下载的存档文件到原Document目录下：
这个时候完成存档的修改工作，回到手机，打开旅行青蛙，不出意外的话，游戏首页可以看到修改后的三叶草数，But，点其它按钮游戏会闪退，敲黑板敲黑板，这个地方当时困扰了我很长时间，最后对比发现是文件权限的问题，解决方法：
在iFile中对照原存档文件的用户组和权限，修改修改后的存档文件用户组和权限，和原文件保持一致，即可成功。
0×02 Android ROOT机
设备软件清单：Android ROOT机一台，安装RE文件管理APP
参考上述iPhone越狱机的修改方法，用iTools安卓模拟器演示，存档文件在/sdcard/Android/data/jp.co.hit_point.tabikaeru目录：
用RE文件管理器通过微信或者其它应用发送GameData.sav文件到电脑上，同样上传到http://www.saveeditonline.com/编辑修改后存到原目录，不存在文件权限的问题，直接修改成功，游戏正常运行。
0×03 普通iPhone/iPad机
设备软件清单：普通 iPhone/iPad 一台，Mac/Windows 电脑一台，电脑上安装 iTunes 和 iMazing 软件
这个地方是着重要讲述的，针对大多数普通用户，操作的流程先简单说一下：需要在电脑上使用iTunes软件备份一下手机文件，然后用iMazing软件编辑iTunes备份文件，找到旅行青蛙GameData.sav游戏存档文件，修改后，再使用iTunes软件还原备份文件，即可修改成功。
详细描述：
使用iTunes备份手机文件前建议先清理一下手机上的垃圾文件、不用的APP或照片，节省操作时间。需要知道iTunes备份文件目录，Windows系统以win7为例，在C:\Users\用户名\AppData\Roaming\Apple Computer\MobileSync\Backup文件夹下，Mac默认的备份路径为/Library/Application Support/MobileSync/Backup，批注：打开Finder，在菜单栏点击“前往”选项，按住option键会显示“资料库”，点击进入,在资料库中，可以找到“Application support”文件夹，继续前往下级Mobilesync文件夹里面的backup就是备份文件上级目录。备份文件夹名类似于0e9e1c2a89b67a4516a4c741db45f0f3778ff6ea。
关于iTunes备份手机过程不详细说，主要说一下iMazing工具的使用，刚开始接触的是iBackupBot工具，修改存档文件后用iTunes还原到最后一步总是提示还原失败，没尝试出解决方案，遂放弃，继而接触到了iMazing工具，和iBackupBot属于同类型工具，启动后会自动读到iTunes备份文件，点右上角"用户名的备份"按钮编辑备份文件：
继而iMazing工具会提示创建一个备份编辑副本，点"继续"按钮，编辑副本创建成功后左侧列表可以看到可编辑的备份，右侧进入应用列表，找到旅行青蛙应用，双击即可看到GameData.sav游戏存档文件，先拷贝至PC，同样上传到http://www.saveeditonline.com/编辑修改后拷贝至原设备，覆盖原存档文件：
iMazing软件一方面为了备份文件的安全性，创建了可编辑副本，另一方面为了收费，可编辑副本放在iTunesBackup备份文件夹iMazing.Versions\Blueprints文件夹下，此时用iMazing还原修改后的备份文件，提示需要购买，选用其它方法，把修改后的备份文件移动到Backup文件夹下，iTunes即可识别还原，Mac电脑按同样方式操作，详细步骤如下：
操作完之后打开iTunes，即可识别到修改游戏存档文件后的备份文件，点击还原即可完成旅行青蛙三叶草数和抽奖券数的修改操作。
还原时可能会遇到一个错误提示，iTunes未能恢复iPhone“XX的iPhone”，因为这台电脑上的可用空间不足。如下：
此时千万不要以为是电脑上的存储空间不足，这个地方的错误提示有误导性，此时应该检查手机上的剩余空间是否大于备份文件夹的大小，如果小于的话就可劲清理文件吧，反正可以恢复回来，留足够的手机空间用户备份文件传输到手机上，然后进行还原操作。
再次敲黑板，备份还原后会存在之前连过的无线网密码需要重新输入密码连接、微信、QQ等一些APP需要重新登录的问题，这个需要事先知晓。
0×04 Show Time
温馨提示：iTunes备份文件不要随意给他人使用。
做一个有态度的技术工作者。
恭祝大家新年好，2018会更好。
*本文原创作者：冰海，本文属FreeBuf原创奖励计划，未经许可禁止转载